<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì‚¬ë‚´ í”½ì…€ ë ˆì´ìŠ¤</title>
    <style>
        /* ëª¨ë˜í•œ í°íŠ¸ì™€ ë°°ê²½ ì ìš© */
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            background-color: #f0f2f5;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            color: #333;
        }
        /* ë©”ì¸ ì¹´ë“œ ì»¨í…Œì´ë„ˆ */
        .container {
            background-color: #fff;
            padding: 2rem;
            border-radius: 15px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
            width: 90%;
            max-width: 600px;
            text-align: center;
        }
        h2 { color: #1a73e8; margin-bottom: 1.5rem; }
        
        /* ì…ë ¥ì°½ ë° ë²„íŠ¼ ìŠ¤íƒ€ì¼ */
        input[type="text"] {
            width: 80%;
            padding: 12px;
            margin-bottom: 15px;
            border: 1px solid #ddd;
            border-radius: 8px;
            font-size: 16px;
        }
        button {
            background-color: #1a73e8;
            color: white;
            border: none;
            padding: 12px 24px;
            font-size: 16px;
            border-radius: 8px;
            cursor: pointer;
            transition: background-color 0.2s;
        }
        button:hover { background-color: #1557b0; }
        button:disabled { background-color: #a0c4ff; cursor: not-allowed; }

        /* ê²Œì„ íŠ¸ë™ ë””ìì¸ */
        #game-area { display: none; margin-top: 20px; }
        #track {
            width: 100%;
            border: 2px solid #e0e0e0;
            background-color: #fafafa;
            padding: 10px 0;
            position: relative;
            border-radius: 10px;
            overflow: hidden;
            margin-bottom: 20px;
        }
        .lane {
            height: 60px;
            border-bottom: 1px dashed #e0e0e0;
            position: relative;
            display: flex;
            align-items: center;
            padding-left: 10px;
        }
        .lane:last-child { border-bottom: none; }
        .animal {
            position: absolute;
            left: 10px;
            transition: left 0.15s linear;
            font-size: 36px;
            z-index: 2;
        }
        .finish-line {
            position: absolute;
            right: 20px;
            top: 0;
            bottom: 0;
            width: 5px;
            background-image: linear-gradient(45deg, #000 25%, transparent 25%, transparent 50%, #000 50%, #000 75%, transparent 75%, transparent);
            background-size: 10px 10px;
            background-color: #fff;
            z-index: 1;
            opacity: 0.3;
        }
        .racer-name {
            margin-left: 50px;
            color: #666;
            font-weight: 500;
        }

        /* ê²°ê³¼ì°½ ë””ìì¸ */
        #result {
            margin-top: 25px;
            padding: 20px;
            background-color: #e8f0fe;
            border-radius: 10px;
            color: #1a73e8;
        }
        #result h3 { margin-top: 0; color: #1a73e8; }
        .rank-item { font-size: 18px; margin: 5px 0; }
        .rank-1 { font-weight: bold; font-size: 22px; color: #d93025; }
    </style>
</head>
<body>
    <div class="container">
        <h2>ğŸƒâ€â™‚ï¸ ì‚¬ë‚´ í”½ì…€ ëœë¤ ë ˆì´ìŠ¤</h2>
        <div id="setup">
            <p style="color: #666; margin-bottom: 20px;">ì°¸ê°€ì ì´ë¦„ì„ ì‰¼í‘œ(,)ë¡œ êµ¬ë¶„í•´ì„œ ì…ë ¥í•´ ì£¼ì„¸ìš”.</p>
            <input type="text" id="names" value="ê¹€ëŒ€ë¦¬,ì´ê³¼ì¥,ë°•ì‚¬ì›,ìµœíŒ€ì¥" placeholder="ì˜ˆ: í™ê¸¸ë™, ê¹€ì² ìˆ˜, ì´ì˜í¬">
            <br>
            <button onclick="initGame()">ê²Œì„ ì¤€ë¹„ ì™„ë£Œ!</button>
        </div>

        <div id="game-area">
            <div id="track"></div>
            <button id="start-btn" onclick="startRace()">ë‹¬ë ¤ë¼!! ğŸ</button>
            <div id="result" style="display: none;"></div>
        </div>
    </div>

    <script>
        const animals = ['ğŸ¶', 'ğŸ±', 'ğŸ¹', 'ğŸ¦Š', 'ğŸ»', 'ğŸ¼', 'ğŸ¸', 'ğŸ°', 'ğŸ¯', 'ğŸ¦', 'ğŸ·', 'ğŸ®'];
        let racers = [];
        let ranking = [];
        let isRacing = false;

        function initGame() {
            const nameInput = document.getElementById('names').value;
            if (!nameInput.trim()) { alert("ì°¸ê°€ì ì´ë¦„ì„ ì…ë ¥í•´ì£¼ì„¸ìš”!"); return; }
            const nameList = nameInput.split(',').map(n => n.trim()).filter(n => n);
            if (nameList.length < 2) { alert("ìµœì†Œ 2ëª… ì´ìƒì˜ ì°¸ê°€ìê°€ í•„ìš”í•©ë‹ˆë‹¤!"); return; }

            const track = document.getElementById('track');
            track.innerHTML = '<div class="finish-line"></div>';
            racers = [];
            ranking = [];
            document.getElementById('result').style.display = 'none';
            document.getElementById('result').innerHTML = '';

            nameList.forEach((name, i) => {
                const lane = document.createElement('div');
                lane.className = 'lane';
                const emoji = animals[i % animals.length];
                lane.innerHTML = `<span id="racer-${i}" class="animal">${emoji}</span><span class="racer-name">${name}</span>`;
                track.appendChild(lane);
                racers.push({ id: i, name: name, pos: 0, finished: false });
            });

            document.getElementById('setup').style.display = 'none';
            document.getElementById('game-area').style.display = 'block';
            document.getElementById('start-btn').disabled = false;
        }

        function startRace() {
            if (isRacing) return;
            isRacing = true;
            document.getElementById('start-btn').disabled = true;

            const interval = setInterval(() => {
                let allFinished = true;
                racers.forEach(r => {
                    if (!r.finished) {
                        allFinished = false;
                        // ì†ë„ ë° ëœë¤ ìš”ì†Œ ì¡°ì ˆ (ë” ê¸´ì¥ê° ìˆê²Œ)
                        let move = Math.random() * 2.5 + 0.5; 
                        if (Math.random() > 0.97) move += 8; // ê°•ë ¥í•œ ë¶€ìŠ¤í„°
                        if (Math.random() > 0.96) move -= 4; // ë¯¸ë„ëŸ¬ì§

                        r.pos += move;
                        // ê²°ìŠ¹ì„  ìœ„ì¹˜ ì¡°ì • (íŠ¸ë™ ë„ˆë¹„ ê³ ë ¤)
                        if (r.pos >= 88) { 
                            r.pos = 88;
                            r.finished = true;
                            ranking.push(r.name);
                        }
                        document.getElementById(`racer-${r.id}`).style.left = r.pos + '%';
                    }
                });

                if (allFinished) {
                    clearInterval(interval);
                    setTimeout(showResult, 500); // ì ì‹œ í›„ ê²°ê³¼ í‘œì‹œ
                }
            }, 100); // í”„ë ˆì„ ì†ë„ ì¡°ì ˆ
        }

        function showResult() {
            const resDiv = document.getElementById('result');
            resDiv.style.display = 'block';
            let html = "<h3>ğŸ† ê²½ê¸° ê²°ê³¼ ğŸ†</h3>";
            ranking.forEach((name, i) => {
                const rankClass = i === 0 ? 'rank-1' : 'rank-item';
                html += `<div class="${rankClass}">${i+1}ë“±: ${name}</div>`;
            });
            resDiv.innerHTML = html;
            isRacing = false;
            // ê²Œì„ ì¬ì‹œì‘ ë²„íŠ¼ ì¶”ê°€
            resDiv.innerHTML += '<button onclick="resetGame()" style="margin-top: 20px; background-color: #34a853;">ë‹¤ì‹œ í•˜ê¸°</button>';
        }
        
        function resetGame() {
            document.getElementById('setup').style.display = 'block';
            document.getElementById('game-area').style.display = 'none';
            document.getElementById('result').style.display = 'none';
        }
    </script>
</body>
</html>
