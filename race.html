<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>ì‚¬ë‚´ í”½ì…€ ë ˆì´ìŠ¤</title>
    <style>
        body { font-family: 'Courier New', Courier, monospace; text-align: center; background: #f0f0f0; }
        #track { width: 90%; max-width: 500px; border: 4px solid #333; margin: 20px auto; background: #fff; padding: 10px; position: relative; }
        .lane { height: 50px; border-bottom: 1px dashed #ccc; position: relative; display: flex; align-items: center; }
        .animal { position: absolute; left: 0; transition: left 0.1s linear; font-size: 30px; }
        .finish-line { position: absolute; right: 10px; top: 0; bottom: 0; width: 5px; background: red; }
        .controls { margin-top: 20px; }
        input { padding: 5px; margin: 2px; }
    </style>
</head>
<body>
    <h2>ğŸƒâ€â™‚ï¸ ì‚¬ë‚´ í”½ì…€ ëœë¤ ë ˆì´ìŠ¤</h2>
    <div id="setup">
        <p>ì°¸ê°€ì ì´ë¦„ì„ ì‰¼í‘œ(,)ë¡œ êµ¬ë¶„í•´ì„œ ì ì–´ì£¼ì„¸ìš”:</p>
        <input type="text" id="names" value="ê¹€ëŒ€ë¦¬,ì´ê³¼ì¥,ë°•ì‚¬ì›,ìµœíŒ€ì¥" style="width: 80%;">
        <br><button onclick="initGame()" style="margin-top:10px; padding: 10px 20px;">ê²Œì„ ì¤€ë¹„!</button>
    </div>

    <div id="game-area" style="display:none;">
        <div id="track"></div>
        <button id="start-btn" onclick="startRace()" style="padding: 10px 20px;">ë‹¬ë ¤ë¼!!</button>
        <div id="result" style="margin-top: 20px; font-weight: bold; color: blue;"></div>
    </div>

    <script>
        const animals = ['ğŸ¶', 'ğŸ±', 'ğŸ¹', 'ğŸ¦Š', 'ğŸ»', 'ğŸ¼', 'ğŸ¸', 'ğŸ°'];
        let racers = [];
        let ranking = [];
        let isRacing = false;

        function initGame() {
            const nameInput = document.getElementById('names').value;
            const nameList = nameInput.split(',').map(n => n.trim());
            const track = document.getElementById('track');
            track.innerHTML = '<div class="finish-line"></div>';
            racers = [];
            ranking = [];
            document.getElementById('result').innerText = '';

            nameList.forEach((name, i) => {
                const lane = document.createElement('div');
                lane.className = 'lane';
                const emoji = animals[i % animals.length];
                lane.innerHTML = `<span id="racer-${i}" class="animal">${emoji}</span><small style="margin-left: 40px; color: #888;">${name}</small>`;
                track.appendChild(lane);
                racers.push({ id: i, name: name, pos: 0, finished: false });
            });

            document.getElementById('setup').style.display = 'none';
            document.getElementById('game-area').style.display = 'block';
        }

        function startRace() {
            if (isRacing) return;
            isRacing = true;
            document.getElementById('start-btn').disabled = true;

            const interval = setInterval(() => {
                let allFinished = true;
                racers.forEach(r => {
                    if (!r.finished) {
                        allFinished = false;
                        // ê¸°ë³¸ ì´ë™ + ëœë¤ ìš”ì†Œ (ì¤‘ê°„ì— ë¶€ìŠ¤í„°ë‚˜ ì‚ë—í•¨ ë°˜ì˜)
                        let move = Math.random() * 8; 
                        if (Math.random() > 0.95) move += 15; // ê¹œì§ ë¶€ìŠ¤í„°!
                        if (Math.random() > 0.98) move -= 10; // ë°”ë‚˜ë‚˜ ë°ŸìŒ!

                        r.pos += move;
                        if (r.pos >= 85) { // ê²°ìŠ¹ì„  ë„ë‹¬ (í¼ì„¼íŠ¸ ê¸°ì¤€)
                            r.pos = 85;
                            r.finished = true;
                            ranking.push(r.name);
                        }
                        document.getElementById(`racer-${r.id}`).style.left = r.pos + '%';
                    }
                });

                if (allFinished) {
                    clearInterval(interval);
                    showResult();
                }
            }, 100);
        }

        function showResult() {
            const resDiv = document.getElementById('result');
            resDiv.innerHTML = "<h3>ğŸ† ê²°ê³¼ ë°œí‘œ ğŸ†</h3>" + 
                ranking.map((name, i) => `${i+1}ë“±: ${name}`).join('<br>');
            isRacing = false;
            document.getElementById('start-btn').disabled = false;
        }
    </script>
</body>
</html>